Introduction
-----------

C'est quoi MineWeb ?
~~~~~~~~~~~~~~~~~~~~
MineWeb est un CMS. Un CMS est un système de gestion de contenu. Plus précisément il vous permet de vous créer rapidement et facilement un site complètement personnalisable. MineWeb est la version 2 de l'ancien CMS LapisCraft de Eywek. Celui-ci n'étant plus stable et mal développé (cf. raisons `ici <https://eywek.fr/lc-explications.pdf>`_).

MineWeb est développé sous un framework PHP nommé CakePHP permettant un développement plus rapide, sécurisé et optimisé. Le projet a été lancé en 2015 en compagnie de Mac’ permettant de convenir entièrement à vos besoins.

Pré-requis
~~~~~~~~~~~~~~~~~~~~
Pour installer le CMS MineWeb votre hébergeur **doit** avoir :

- Version PHP supérieure ou égale à 5.6 et inférieure à 7.3
- PDO activé
- cURL activé
- Réécriture d'URL
- .htaccess activés
- La librairie GD2
- La possibilité d'ouvrir un zip
- La possibilité d'ouvrir un site à distance
- OpenSSL

Installation
-----------
.. note:: Vous devez placer tout le contenu de l'archive téléchargée, sur votre hébergeur (les fichiers .DS_Store & \__MACOSX sont inutiles). Il faut ensuite appliquer les permissions **777** sur tous les fichiers en **recursif** (pour permettre les mises à jour). Puis rendez-vous sur http://{votre site}.fr

Étape 1 - Configuration de la base de données
~~~~~~~~~~~~~~~~~~~~
Vous devez avoir une page demandant vos identifiants de base de données, vous devez entrez ceux-ci et tester la connexion, puis il vous faudra cliquer sur un bouton qui installera la base de données automatiquement.

Étape 2 - Création de l'administrateur
~~~~~~~~~~~~~~~~~~~~
Voici la deuxième et dernière étape de l'installation du CMS, vous allez créer votre compte administrateur qui vous permettra d'accéder au panel admin du CMS. Vous avez juste à remplir les champs qui vous sont présentés et à soumettre vos informations en cliquant sur le bouton “Suivant”.

Installation terminée
~~~~~~~~~~~~~~~~~~~~
Une fois l'installation du CMS complétée vous pouvez passer à l'utilisation du CMS en lui-même. Pour configurer votre CMS il vous faut vous connecter en cliquant sur le bouton en haut à gauche de la barre de navigation. Vous cliquez sur connexion puis entrez vos informations pour vous connecter. Vous cliquez ensuite sur Panel administrateur, vous serez redirigé et vous pourrez ensuite cliquer sur Général puis Préférences générales.

Autres
~~~~~~~~~~~~~~~~~~~~
Si vous avez besoin d'aide, si vous rencontrez un problème non répertorié ici, vous pouvez nous contacter sur notre Discord.

Lier serveur-site
-----------
.. warning:: **Le plugins est compatibles à partir de la version 1.8**

.. note:: 
   **Type de connexion**:
   
   - **Par Défaut** : connexion à un serveur lié avec le plugin Bukkit/Spigot, permet l’utilisation de toutes les fonctionnalités du CMS (**boutique, classement factions, vote**…) 

   - **Par Rcon** : connexion à un serveur lié avec le Rcon. Pour la liaison d'un serveur Bungee, utilisez le Plugin Bungeecord RCON, permet l’utilisation de toutes les fonctionnalités du CMS mais pas du classement factions 
   
   - **Par Ping** : connexion à un serveur sans plugin, permet uniquement d’avoir le nombre de joueurs en ligne et le nombre de joueurs maximums (la **boutique** et le **classement factions** ne **pourront pas** être utilisés avec ce type de connexion)

Configuration préalable
~~~~~~~~~~~~~~~~~~~~
Rendez-vous sur la page de liaison site-serveur sur le panel admin de votre CMS. Vous devez dans un premier temps configurer le temps d’exécution maximum (appelé aussi timeout), il est conseillé de mettre 1 (seconde).

.. image:: https://docs.mineweb.org/images/server_timeout.png

.. note:: Vous avez à côté deux boutons pour désactiver la fonctionnalité (qui mettra automatiquement le statut du serveur à : éteint) si vous ne souhaitez pas utiliser la liaison site-serveur. Et un autre bouton pour activer/désactiver le cache sur la “bannière” (permet que le message affiché sur le site (joueurs connectés, MOTD…) soit stocké pendant quelques minutes permettant d’éviter la surcharge de commande au serveur).

Liaison à un serveur (par défaut)
~~~~~~~~~~~~~~~~~~~~
Maintenant nous allons lier votre serveur Minecraft au **CMS**. Pour cela vous devez avoir installé sur votre serveur le plugin MineWeb disponible à cette adresse:
https://github.com/MineWeb/ServerBridge/raw/master/mineweb_bridge-2.0.0.jar

Une fois le plugin téléchargé, placez-le dans votre dossier ``plugins`` de votre serveur et **redémarrez celui-ci**.
Vous n’avez pas à toucher à la configuration du plugin.

Maintenant que vous avez configuré le serveur vous pouvez ajouter un serveur et remplir les informations nécessaires :

- ``Type de la connexion`` mettez **Par défaut**
- ``Nom`` par le nom affiché.
- ``IP`` par l’ip (ou domaine) sans le port.
- ``Port`` par le port de votre serveur (25565 par défaut si vous n’avez pas de port).

Cliquez ensuite sur **Connexion** pour tester la connexion, si celle-ci échoue, rendez-vous sur https://docs.mineweb.org/#la-connexion-echoue

.. note:: **Port customisé :** Vous pouvez également configurer un port personnalisé si vous ne souhaitez pas utiliser le port minecraft de votre serveur. Pour cela, assurez-vous d'avoir un port disponible et ouvert et effectuez la commande **/mineweb port <port>**.
.. note:: **ProtocolLib :** Si vous avez ProtocolLib et que le plugin produit une erreur à cause du plugin de MineWeb vous pouvez utiliser cette version: https://github.com/MineWeb/ServerBridge/raw/no-injector/mineweb_bridge-2.0.0.jar Vous devez obligatoirement configurer un port disponible et ouvert à l'aide la commande **/mineweb port <port>**.

Liaison par RCON
~~~~~~~~~~~~~~~~~~~~
Vous n’avez pas besoin de plugin pour cette liaison. Le protocol RCON est disponible sur tous les serveurs minecraft et permet de communiquer avec le site. Pour utiliser ce protocol il vous faut le configurer dans votre server.properties :

- Passer enable-rcon à true
- Changer rcon.password par un mot de passe
- Changer rcon.port par un port disponible

Il vous suffit ensuite de configurer un serveur comme ceci depuis la page de liaison :

- ``Type de la connexion`` mettez **RCON**.
- ``Nom`` par le nom affiché.
- ``IP`` par l’ip (ou domaine) **sans le port**.
- ``Port`` par le port de votre serveur (25565 par défaut si vous n’avez pas de port).
- ``Port RCON`` par le port de RCON configureé (doit être **ouvert** et **disponible** bien sûr).
- ``Mot de passe RCON`` par le mot de passe RCON.

Cliquez ensuite sur **Connexion** pour tester la connexion.

Liaison par PING
~~~~~~~~~~~~~~~~~~~~
Vous n’avez pas besoin de plugin pour cette liaison, il vous suffit juste de configurer un serveur comme ceci depuis la page de liaison :

- ``Type de la connexion`` mettez **Ping**.
- ``Nom`` par le nom affiché.
- ``IP`` par l’ip (ou domaine) **sans le port**.
- ``Port`` par le port de votre serveur (25565 par défaut si vous n’avez pas de port).

Cliquez ensuite sur **Connexion** pour tester la connexion.

La connexion échoue
~~~~~~~~~~~~~~~~~~~~
Dans un premier temps, vérifiez que vous n'avez pas d'erreur dans la console de votre serveur en rapport avec le plugin MineWeb.

Ensuite, essayez de **redémarrer votre serveur**.

Si la connexion échoue toujours, venez-nous voir sur Discord: https://discordapp.com/invite/3QYdt8r avec un **maximum d'explications et d'informations**, et répondez à ces questions :

- Quelle IP avez-vous mis ?
- Quel port ?
- Aucune erreur dans la console ?
- Quelle version de Spigot avez-vous ?
- Avez-vous essayé de rédemarrer le serveur ?
- Fournissez-nous des **logs** de démarrage du serveur sur pastebin.com
- Fournissez-nous le fichier **mineweb.log** du plugin sur pastebin.com